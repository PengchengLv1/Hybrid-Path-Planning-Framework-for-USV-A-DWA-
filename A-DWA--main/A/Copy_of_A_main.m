clc;
clear;
close all;

%% 1. 定义栅格地图矩阵 (0=空地, 1=障碍物)
MAX0 = [ ...
   0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
    0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 1 0 1 0 1 0;
    0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
    0 0 0 0 0 0 1 0 1 0 0 0 1 1 0 0 0 0 1 1 0;
    0 0 1 1 0 1 1 1 0 1 1 0 0 0 0 1 0 0 0 0 0;
    0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0;
    0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0;
    0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1;
    1 0 0 0 0 1 0 1 0 0 0 1 0 1 0 0 0 1 0 1 0;
    0 0 1 0 0 0 1 0 0 1 1 0 1 0 1 0 1 0 0 0 0;
    0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0;
    0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0;
    0 1 1 1 0 0 1 1 1 0 0 0 0 1 0 0 0 0 1 0 0;
    0 0 1 0 0 0 0 0 1 1 1 0 0 0 0 0 0 1 0 0 0;
    0 0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0;
    0 0 0 0 0 1 0 1 1 0 1 0 1 0 1 0 0 0 0 0 0;
    0 0 1 1 0 0 1 0 0 1 1 0 0 0 0 0 0 0 0 0 0;
    0 0 1 0 1 0 1 1 0 0 1 1 0 0 1 1 0 1 0 0 0;
    0 0 0 0 0 0 0 0 1 0 1 0 0 0 0 0 1 0 0 0 0;
    0 0 1 1 0 0 0 0 0 0 0 0 1 0 1 0 0 0 1 0 0;
    0 1 0 0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0;];

MAX = MAX0;

% 获取行列数
% 注意：在你参考的代码逻辑中，行索引(i)被画在了X轴，列索引(j)被画在了Y轴
% 因此 X轴的极限是行数，Y轴的极限是列数
rows = size(MAX, 1); 
cols = size(MAX, 2); 

%% 2. 初始化图形窗口
figure('Color', 'w'); % 设置背景为纯白
hold on;
grid on;
axis equal; % 保证格子是正方形

% 设置坐标轴范围
axis([1 rows+1, 1 cols+1]);

% 设置网格线样式
set(gca, 'xtick', 1:1:rows+1, 'ytick', 1:1:cols+1, ...
    'GridLineStyle', '-', 'xGrid', 'on', 'yGrid', 'on');

%% 3. 核心绘图逻辑 (参考你提供的代码)
% 遍历每一个栅格，如果是1，则用 fill 填充黑色
for j = 1:cols         % 遍历列 (对应Y坐标)
    for i = 1:rows     % 遍历行 (对应X坐标)
        if (MAX(i,j) == 1)
            % fill函数定义四个顶点的坐标
            % X坐标: [i, i+1, i+1, i]
            % Y坐标: [j, j, j+1, j+1]
            fill([i, i+1, i+1, i], [j, j, j+1, j+1], 'k'); 
        end
    end
end

%% 4. 添加标签 (可选)
title('栅格地图环境');
xlabel('X轴 (矩阵行索引)');
ylabel('Y轴 (矩阵列索引)');

% 如果你想去掉坐标轴数字，保留网格，可以取消注释下面这行：
% set(gca, 'XTickLabel', [], 'YTickLabel', []);